-- User table main

UPDATE users
SET invite_code = FLOOR(RAND() * 900000) + 100000
WHERE invite_code IS NULL;

UPDATE users
SET invite_code = FLOOR(RAND() * 900000) + 100000
WHERE invite_code IN (
    SELECT invite_code
    FROM (
        SELECT invite_code, COUNT(*) AS count
        FROM users
        GROUP BY invite_code
        HAVING count > 1
    ) AS duplicates
);



-- Password ko Bcrypt main convert karna hai


add role to users datatable


UPDATE stakings SET created_at = DepositTime;
UPDATE stakings SET updated_at = DepositTime;


CREATE TABLE admin_login_history (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    admin_id BIGINT UNSIGNED NULL,
    attempt_email VARCHAR(255) NULL,
    login_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    login_ip VARCHAR(45) NOT NULL,
    user_agent VARCHAR(255) NOT NULL,
    status VARCHAR(50) NOT NULL,
    FOREIGN KEY (admin_id) REFERENCES users(id) ON DELETE SET NULL
);

